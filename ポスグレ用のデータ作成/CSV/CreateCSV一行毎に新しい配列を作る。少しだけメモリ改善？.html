<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ†ãƒ¼ãƒ–ãƒ«ç·¨é›†</title>
    <style>
        .container {
            display: flex;
            justify-content: space-between;
        }
        .left {
            width: 50%;
        }
        .right {
            width: 50%;
            padding-left: 20px;
            border-left: 2px solid #ddd;
        }
        button {
            margin-top: 10px;
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆãƒœã‚¿ãƒ³ã‚’å¼·èª¿ */
		#processButton {
		    background-color: #ffcc00; /* é»„è‰² */
		    font-weight: bold;
		    padding: 10px 15px;
		    border: 2px solid #ffaa00; /* æ¿ƒã„ã‚ªãƒ¬ãƒ³ã‚¸æ  */
		    border-radius: 5px;
		    cursor: pointer;
		}
		#processButton10 {
	    background-color: #ff3333; /* èµ¤è‰² */
	    font-weight: bold;
	    padding: 10px 15px;
	    border: 2px solid #cc0000; /* æ¿ƒã„èµ¤è‰²æ  */
	    border-radius: 5px;
	    cursor: pointer;
	}


		/* ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã‚’æ°´è‰²ã« */
		#downloadButton {
		    background-color: #00aaff; /* æ°´è‰² */
		    color: white;
		    font-weight: bold;
		    padding: 10px 15px;
		    border: 2px solid #0077cc; /* æ¿ƒã„æ°´è‰²ã®æ  */
		    border-radius: 5px;
		    cursor: pointer;
		}
    </style>
</head>
<body>
    <div class="container">
        <!-- å·¦å´: å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="left">
		    <h2>æƒ…å ±ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ </h2>
		    
		    <label for="nameInput">åå‰å¤‰æ›´:</label>
		    <input type="text" id="nameInput" placeholder="æ–°ã—ã„åå‰ã‚’å…¥åŠ›">
		    <button onclick="updateName()">å¤‰æ›´</button>
		    
		    <h3>å¹´é½¢å¤‰æ›´:</h3>
		    <button onclick="updateAge(20)">20ã«å¤‰æ›´</button>
		    <button onclick="updateAge(30)">30ã«å¤‰æ›´</button>
    
		    <h3>ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†:</h3>
		    <button id="processButton" onclick="processTableName()">ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ</button>
    
		    <h3>ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†:</h3>
		    <button id="processButton10" onclick="processTableName10()">ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ<br>(10è¡Œ)</button>
        </div>

        <!-- å³å´: çµæœè¡¨ç¤º -->
        <div class="right">
            <h3>ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿:</h3>
            <p id="display"></p>
            
            <h3>ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿:</h3>
            <p id="processedData"></p>
            
		    <br>
		    <button id="downloadButton" onclick="downloadProcessedArray()">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
		    <br>
		    <button id="downloadButton" onclick="downloadProcessedArray10()">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰10</button>
        </div>
    </div>

    <script>
        const header = 'name, age, jusho, tel, date\n';
        
        let tableName = {
            name: 'ãƒ†ã‚¹ãƒˆ',
            age: 40,
            jusho: 'åå¤å±‹å¸‚ã€€æ „',
            tel: '080-xxxx-xxxx',
            date: '2025-05-31 23:37:00'
        };
        
        let processedArray = [];
	    let csvContent = ""; 

        function updateName() {
            const newName = document.getElementById('nameInput').value;
            if (newName.trim() !== '') {
                // ã¡ã‚ƒã‚“ã¨å…¥åŠ›ã•ã‚ŒãŸå ´åˆã®ã¿æœ‰åŠ¹ï¼ˆå…¥åŠ›ã•ã‚ŒãŸåå‰ãŒç©ºã‚„ã‚¹ãƒšãƒ¼ã‚¹ã§ãªã„å ´åˆï¼‰
                tableName.name = newName;
                displayData();
            }
        }

        function updateAge(newAge) {
            tableName.age = newAge;
            displayData();
        }

        function processTableName() {

            for (const key in tableName) {
                if (typeof tableName[key] !== "string" ) {
                    // Stringå‹ã§ãªã„ã‚‚ã®ã¯ã€ã€Œ""ã€ã§å›²ã¾ãšã«ãã®ã¾ã¾
                    processedArray.push(tableName[key]);
                } else if ( tableName[key].includes("/") || tableName[key].includes("-") ){
                    // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®å ´åˆï¼ˆï¼‰ã‚‚ã€Œ""ã€ã§å›²ã¾ãšã«ãã®ã¾ã¾
                    processedArray.push(tableName[key]);
                } else {
                    // é€šå¸¸ã®characterç³»ã§ã‚ã‚Œã°ã€Œ""ã€ã§å›²ã¾ã‚€
                    processedArray.push(`"${tableName[key]}"`);
                }
            }
            // CSVãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›
            processedArray.join(", ");
            console.log(processedArray);

            document.getElementById('processedData').innerHTML = processedArray;
        }
        
        /*
		function processTableName10() {
            let processedArray10 = [];
		    for (let i = 0; i < 10; i++) {
		        for (const key in tableName) {
		            if (typeof tableName[key] !== "string") {
		                processedArray10.push(tableName[key] + 1); // æ•°å€¤å‹ã¯é€£ç¶šã—ãŸå€¤ã«
		            } else if (tableName[key].includes("/") || tableName[key].includes("-")) {
		                processedArray10.push(tableName[key]); // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯ãã®ã¾ã¾
		            } else {
		                processedArray10.push(`"${tableName[key]}"`); // æ–‡å­—åˆ—å‹ã¯ "" ã§å›²ã‚€
		            }
		        }

		        csvContent += processedArray10.join(", ") + "\n"; // 1è¡Œãšã¤è¿½åŠ 
		        processedArray10 = []; // åˆæœŸåŒ–
		    }
		    

		    console.log(csvContent);
		    document.getElementById('processedData').innerHTML = csvContent;
		}
		*/
		
		function processTableName10() {

		    for (let i = 0; i < 10; i++) {
		        // ğŸ”¹ `processedArray10` ã‚’ `for` ãƒ«ãƒ¼ãƒ—å†…ã§å®£è¨€ â†’ è‡ªå‹•çš„ã«ã‚¹ã‚³ãƒ¼ãƒ—ã®å¤–ã«å½±éŸ¿ã—ãªã„
		        let processedArray10 = [];

		        for (const key in tableName) {
		            if (typeof tableName[key] !== "string") {
		                processedArray10.push(tableName[key] + 1); // æ•°å€¤å‹ã¯é€£ç¶šã—ãŸå€¤ã«
		            } else if (tableName[key].includes("/") || tableName[key].includes("-")) {
		                processedArray10.push(tableName[key]); // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯ãã®ã¾ã¾
		            } else {
		                processedArray10.push(`"${tableName[key]}"`); // æ–‡å­—åˆ—å‹ã¯ "" ã§å›²ã‚€
		            }
		        }

		        csvContent += processedArray10.join(", ") + "\n"; // 1è¡Œãšã¤è¿½åŠ 
		        // ğŸ”¹ `processedArray10 = [];` ã®å†ä»£å…¥ãŒä¸è¦ï¼
		    }

		    console.log(csvContent);
		    document.getElementById('processedData').innerHTML = csvContent;
		}



        function displayData() {
            document.getElementById('display').innerHTML = 
                `åå‰: ${tableName.name}<br>
                 å¹´é½¢: ${tableName.age}<br>
                 ä½æ‰€: ${tableName.jusho}<br>
                 é›»è©±ç•ªå·: ${tableName.tal}<br>
                 æ—¥æ™‚: ${tableName.date}`;
        }
        
        function downloadProcessedArray() {
            processTableName();
            const blob = new Blob([header + processedArray], { type: "text/csv" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "processed_data.csv";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        function downloadProcessedArray10() {
            if(csvContent == null) {
                 processTableName10();
            } 
            const blob = new Blob([header + csvContent], { type: "text/csv" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = "processed_data.csv";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        window.onload = displayData;
    </script>
</body>
</html>
